# Todo MVC sample using Keycloak

> It is a demonstration of using Keycloak inside a Todo application.

### Prerequisites

- Docker
- Docker Compose
- Make
- OpenJDK 8

Add `devbox` hostname into your `/etc/hosts`:

```
127.0.1.1 devbox
```

## Build

Build Docker image:

```bash
$ make build
```

This is a complete build process:

- Create the Docker network
- Build the Java artifact with Gradle
- Run tests and integration tests
- Build the docker image:
  - Put the previous artifact (matching $VERSION environment variable) into the
    JDK based image
  - Tag image with proper name and version

## Deploy

Deploy a complete setup on a Docker host.

```bash
$ make deploy
```

The setup:

- A Keycloak container. This container is auto configured by a shell script in
  order to create client and public key used by the API container.
- An API container. This container is configured to use public key generated by
  the Keycloak container.


If you want to deploy the setup to a remote Docker host you can use the
following command:

```bash
$ . ./setDockerHost 10.90.248.78
$ make deploy
```

Undeploy the setup is as simple:

```bash
$ make undeploy
```

